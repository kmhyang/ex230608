<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:security="http://www.springframework.org/schema/security"
	xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-5.2.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
		
		<!-- http : 경로에 대해서 인증, 인가 설정 -->
		<!-- 1) 아래 경로는 security 적용하지 않음 ( 정적인 파일은 경로 적용X )  -->
  <security:http pattern="/css/**" security="none"/>
  
		<!-- 2) 경로 패턴으로 인증, 인가 받아야 하는지 확인함. -->
		<!-- intercept-url : 낚아채서 체크함 ( 불시검문 ) -->
			<!-- pattern을 기준으로 순차적으로 확인함. ★★★ 순서 매우 중요 ★★★ -->
			<!-- 개별, 개별 확인 후 ** default? 확인해야 함. -->
		<!-- access : 인증, 인가 조건-->
		
	<security:http>
		<security:intercept-url pattern="/top.jsp" access="permitAll()"/><!-- 모든 사용자 접근 가능 -->
		<security:intercept-url pattern="/admin/**" access="hasAuthority('ROLE_ADMIN')"/><!-- 해당경로로 접근한 user 인증 -> 권한 : ROLE_ADMIN 있는지 확인 -->
		<security:intercept-url pattern="/**" access="isAuthenticated()"/> <!-- 인증만 되면 접근 가능 // 인가 상관없음 : user.jsp 페이지--> <!-- /** 제일 마지막 순서-->
		<security:form-login default-target-url="/top.jsp"/> <!-- form 태그로 로그인 하면 security가 낚아챔. // 인증하는 페이지로 이동시킴. -->
																													<!-- security에 내장되어 있는 것으로 인증, 인가 확인???? -->
		<security:logout logout-url="/logout" logout-success-url="/top.jsp"/>
		<security:csrf disabled="true"/>
	</security:http>
	
	<security:authentication-manager>
		<security:authentication-provider> <!-- 다른방식으로 인증 받으려면 건드려야 함. // 그거 아니면 사용X-->
			<security:user-service>
				<security:user name="user" password="{noop}1234" authorities="ROLE_USER"/> <!-- test할 때만 사용 / 암호화되지 않았다는 뜻 -->
				<security:user name="admin" password="{noop}1234" authorities="ROLE_ADMIN"/> <!-- test할 때만 사용 / 암호화되지 않았다는 뜻 -->
			</security:user-service>
		</security:authentication-provider>
	</security:authentication-manager>


</beans>
